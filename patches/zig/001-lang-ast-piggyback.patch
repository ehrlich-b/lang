diff --git a/src/codegen/c.zig b/src/codegen/c.zig
index b6717183..a1b2c3d4 100644
--- a/src/codegen/c.zig
+++ b/src/codegen/c.zig
@@ -1,6 +1,7 @@
 const std = @import("std");
 const builtin = @import("builtin");
 const assert = std.debug.assert;
+const lang_ast = @import("lang_ast.zig");
 const mem = std.mem;
 const log = std.log.scoped(.c);
 const Allocator = mem.Allocator;
@@ -3047,13 +3048,24 @@ pub fn generate(
     const gpa = zcu.gpa;

     _ = src_loc;
-    assert(lf.tag == .c);

     const func = zcu.funcInfo(func_index);

+    // Lang AST capture mode: emit S-expressions instead of C
+    if (std.posix.getenv("LANG_AST")) |_| {
+        const code = lang_ast.generateLangAst(gpa, zcu, func_index, air) catch |err| switch (err) {
+            error.OutOfMemory => return error.OutOfMemory,
+        };
+        return .{
+            .uavs = .empty,
+            .code = code,
+            .code_header = &.{},
+            .fwd_decl = &.{},
+            .ctype_pool = .empty,
+            .lazy_fns = .empty,
+        };
+    }
+
+    assert(lf.tag == .c);
+
     var function: Function = .{
         .value_map = .init(gpa),
         .air = air.*,
